/* --- Base & Variables (Nuevo Diseño) --- */
:root {
    --font-sans: 'Inter', sans-serif;
    --font-heading: 'Inter', sans-serif;
    
    /* Paleta de Colores Moderna */
    --color-bg-light: #F7F8FA; /* Fondo principal claro */
    --color-bg-dark: #1A202C;  /* Fondo de la barra lateral */
    --color-container-bg: #FFFFFF; /* Fondo de contenedores y modales */
    --color-border: #E2E8F0; /* Bordes sutiles */
    
    /* Colores de Texto */
    --color-text-primary: #2D3748; /* Texto principal oscuro */
    --color-text-secondary: #718096; /* Texto secundario gris */
    --color-text-light: #F7FAFC; /* Texto sobre fondos oscuros */
    --color-text-placeholder: #A0AEC0;

    /* Colores de Acento */
    --color-primary: #4A90E2; /* Un azul profesional y amigable */
    --color-primary-hover: #357ABD;
    --color-secondary: #50E3C2; /* Un toque de menta para acentos */
    --color-danger: #E53E3E;
    --color-danger-hover: #C53030;
    --color-success: #48BB78;
    
    /* Colores de Chat */
    --color-chat-bg: #E5DDD5; /* Mantenemos el fondo clásico pero lo podemos suavizar */
    --color-bubble-sent-bg: #DCF8C6;
    --color-bubble-received-bg: var(--color-container-bg);

    /* Radios y Sombras */
    --border-radius: 8px;
    --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
}

/* --- Estilos Base y Tipografía --- */
body { 
    font-family: var(--font-sans); 
    background-color: var(--color-bg-light); 
    color: var(--color-text-primary); 
    font-size: 15px; 
    overflow: hidden; 
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}
body.modal-open { overflow: hidden; }
h1, h2, h3, h4, h5, h6 { 
    font-family: var(--font-heading); 
    color: var(--color-text-primary); 
    font-weight: 600;
}
::-webkit-scrollbar { width: 8px; height: 8px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: #CBD5E0; border-radius: 4px; }
::-webkit-scrollbar-thumb:hover { background: #A0AEC0; }
.hidden { display: none; }
input[type="file"], input[type="color"] { display: none; }

/* --- Componentes Reutilizables: Botones e Inputs --- */
.btn { 
    font-family: var(--font-sans); 
    font-weight: 500; 
    padding: 9px 20px; 
    border: 1px solid transparent;
    border-radius: var(--border-radius); 
    cursor: pointer; 
    font-size: 0.95rem; 
    transition: all 0.2s ease; 
    display: inline-flex; 
    align-items: center; 
    justify-content: center; 
    gap: 8px; 
    box-shadow: var(--shadow-sm);
}
.btn:disabled { 
    background-color: #E2E8F0; 
    color: var(--color-text-placeholder); 
    cursor: not-allowed; 
    box-shadow: none;
    opacity: 0.7; 
}
.btn:hover:not(:disabled) { 
    transform: translateY(-2px); 
    box-shadow: var(--shadow-md); 
}
.btn:active:not(:disabled) { 
    transform: translateY(0px); 
    box-shadow: var(--shadow-sm); 
}

.btn-primary { 
    background-color: var(--color-primary); 
    color: white; 
}
.btn-primary:hover:not(:disabled) { 
    background-color: var(--color-primary-hover); 
}
.btn-secondary { 
    background-color: var(--color-text-primary); 
    color: white; 
}
.btn-secondary:hover:not(:disabled) { 
    background-color: #1A202C;
}
.btn-danger { background-color: var(--color-danger); color: white; }
.btn-danger:hover:not(:disabled) { background-color: var(--color-danger-hover); }
.btn-success { background-color: var(--color-success); color: white; }
.btn-subtle { 
    background-color: #EDF2F7; 
    color: var(--color-text-secondary);
    box-shadow: none;
}
.btn-subtle:hover { 
    background-color: #E2E8F0; 
    color: var(--color-text-primary); 
    box-shadow: var(--shadow-sm);
}

input[type="email"], input[type="password"], input[type="text"], input[type="number"], input[type="tel"], textarea, select { 
    width: 100%; 
    padding: 10px 15px; 
    margin-bottom: 0;
    border: 1px solid var(--color-border); 
    border-radius: var(--border-radius); 
    font-family: var(--font-sans); 
    font-size: 0.95rem; 
    color: var(--color-text-primary); 
    background-color: var(--color-container-bg); 
    transition: all 0.2s ease; 
}
input:focus, textarea:focus, select:focus { 
    outline: none; 
    border-color: var(--color-primary); 
    box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.2); 
}

/* --- Estructura Principal --- */
#app-body { display: flex; flex: 1; overflow: hidden; }
#main-view-container { flex: 1; min-width: 0; background-color: var(--color-bg-light); }
#app-header { background-color: var(--color-container-bg); border-bottom: 1px solid var(--color-border); }
#app-header h1 { color: var(--color-text-primary); }

/* Barra Lateral */
#main-sidebar { 
    background-color: var(--color-bg-dark); 
    border-right: none;
    width: 260px; 
    transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    flex-shrink: 0; 
}
#main-sidebar.collapsed { width: 72px; }
#main-sidebar.collapsed .sidebar-text, #main-sidebar.collapsed #ia-menu-chevron { display: none; }
#main-sidebar.collapsed .nav-item { justify-content: center; }

.nav-item { 
    display: flex; 
    align-items: center; 
    padding: 10px 16px; 
    border-radius: var(--border-radius); 
    margin: 4px 8px;
    font-weight: 500; 
    color: #A0AEC0;
    transition: background-color 0.2s ease, color 0.2s ease; 
    cursor: pointer; 
}
.nav-item:hover { 
    background-color: #2D3748; 
    color: var(--color-text-light); 
}
.nav-item.active { 
    background-color: var(--color-primary); 
    color: white; 
}
.nav-item i { 
    width: 24px; 
    text-align: center; 
    margin-right: 16px; 
    font-size: 1.1rem; 
    transition: transform 0.2s ease;
}
.nav-item:hover i { transform: scale(1.1); }
#main-sidebar.collapsed .nav-item i { margin-right: 0; }
#ia-submenu .nav-item { padding-left: 20px; }
#ia-submenu .nav-item i { margin-right: 12px; font-size: 1rem; }


/* --- Vista de Chat --- */
#chat-view { display: flex; flex: 1; min-width: 0; height: 100%; }
#contacts-panel { background-color: #FFFFFF; border-right: 1px solid var(--color-border); }
.contact-item { 
    transition: all 0.2s ease; 
    border-left: 3px solid transparent; 
    padding: 10px 12px;
}
.contact-item:hover { background-color: #F7F8FA; }
.contact-item.selected { 
    background-color: #EBF4FF;
    border-left-color: var(--color-primary); 
}
.unread-badge { background-color: var(--color-primary); color: white; }

#chat-panel { 
    background-color: #F4F5F7; 
    /* Opcional: remover la imagen de fondo para un look más limpio */
    /* background-image: none; */
}
.chat-header { background-color: #FFFFFF; border-bottom: 1px solid var(--color-border); }
.chat-footer { background-color: #FFFFFF; border-top: 1px solid var(--color-border); padding: 12px 16px; }

#message-input { 
    background-color: #F7F8FA; 
    border-radius: 20px; 
    padding: 10px 20px; 
    border: 1px solid var(--color-border); 
}
.chat-icon-btn { color: var(--color-text-secondary); }
.chat-icon-btn:hover { color: var(--color-primary); }

.message-bubble { 
    padding: 8px 14px; 
    border-radius: 18px; 
    box-shadow: var(--shadow-sm); 
    max-width: 70%; 
}
.message-bubble.sent { 
    background-color: var(--color-bubble-sent-bg); 
    color: #1A202C; 
    border-bottom-right-radius: 4px; 
}
.message-bubble.received { 
    background-color: var(--color-bubble-received-bg); 
    color: var(--color-text-primary); 
    border-bottom-left-radius: 4px; 
}
.date-separator { 
    background-color: #E2E8F0; 
    color: var(--color-text-secondary); 
    box-shadow: none; 
}

/* Detalles de Contacto */
#contact-details-panel.open { width: 340px; }
#contact-details-panel { background-color: #FFFFFF; border-left: 1px solid var(--color-border); }


/* --- Vistas Generales --- */
.view-container { 
    padding: 2.5rem; 
    height: 100%; 
    overflow-y: auto; 
}
.view-header h1 { 
    font-size: 1.75rem; 
    font-weight: 700; 
}
.table th {
    font-weight: 500;
    color: var(--color-text-secondary);
    font-size: 0.8rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* Modales */
.modal-backdrop { background-color: rgba(45, 55, 72, 0.6); backdrop-filter: blur(4px); }
.modal-content {
    background-color: white;
    padding: 32px;
    border-radius: 12px;
    box-shadow: var(--shadow-lg);
    width: 90%;
    max-width: 550px;
}
.modal-content h2 { margin-top: 0; margin-bottom: 24px; font-size: 1.5rem; }
.modal-content label { font-weight: 500; font-size: 0.9rem; }

/* Pipeline */
.pipeline-container { background-color: var(--color-bg-light); }
.pipeline-column { background-color: #EDF2F7; }
.pipeline-header { padding: 12px 16px; }
.pipeline-card { 
    background-color: white; 
    border-radius: var(--border-radius); 
    padding: 12px;
    box-shadow: var(--shadow-sm); 
}
.pipeline-card:hover { box-shadow: var(--shadow-md); }

/* Ajustes */
.settings-card { 
    background-color: #fff; 
    border: 1px solid var(--color-border); 
    border-radius: 12px; 
    padding: 1.5rem; 
    box-shadow: var(--shadow-sm);
}
.toggle-switch input:checked + .slider { background-color: var(--color-primary); }

/* Login */
#login-view { background-color: var(--color-bg-light); }
.login-container { 
    background-color: var(--color-container-bg); 
    box-shadow: var(--shadow-lg); 
}
.login-container h1 { color: var(--color-text-primary); }
#login-error-message { color: var(--color-danger); }

/* --- Estilos Heredados (Ajustados) --- */
/* Manteniendo selectores para no romper la funcionalidad de JS */
#loading-overlay { background-color: var(--color-bg-light); }
.filter-btn { background-color: #E2E8F0; color: #4A5568; }
.filter-btn.active { background-color: var(--color-primary); color: white; }
.tab-btn { color: var(--color-text-secondary); }
.tab-btn.active { color: var(--color-primary); border-bottom-color: var(--color-primary); }
.note-item { background-color: #FEFCE8; border-left-color: #FBBF24; }
.color-picker-label { border-color: var(--color-border); }
.draggable-row { cursor: grab; }
.draggable-row:active { cursor: grabbing; }
.drag-handle { color: #A0AEC0; }
.sortable-ghost { opacity: 0.7; }
.message-actions { background-color: white; }
.time-overlay { background-color: rgba(0, 0, 0, 0.4); }
.image-modal-backdrop { background-color: rgba(0, 0, 0, 0.75); }
.image-modal-close { background-color: white; color: black; }
.order-badge { background-color: var(--color-secondary); color: var(--color-text-primary); }
